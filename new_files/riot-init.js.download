var host=window.location.hostname;var url="//"+host+"/selfservice/api/zaf/";if((window.location.href.indexOf("#&")>=0)||(window.location.href.indexOf("#_ga")>=0)){history.pushState(null,null,window.location.pathname+window.location.hash);}
function GetUrlVars(){var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++){hash=hashes[i].split('=');vars.push(hash[0]);var h1=hash[1]===undefined?"1":hash[1];vars[hash[0]]=h1;}
return vars;}
var qs=GetUrlVars();var paymentSuccess=qs["paymentnresult"];var debugMode=qs["debugmode"];var myaccount=qs["my-account"];debugMode=(debugMode!==undefined);function app(){var self=this;riot.observable(self);}
var app=new app();app.url=url;app.connecturl="https://eazy.dstv.com/en/zm/sign-in"
app.GeoCountry='';app.setUserLog=function(){var userlog={};userlog.customernumber=app.customernumber;if(app[app.customernumber]&&app[app.customernumber].properties){userlog.emailid=app[app.customernumber].properties.email.value;userlog.customertype=app[app.customernumber].properties.customerType.value;userlog.customername=app[app.customernumber].properties.firstName.value+" "+app[app.customernumber].properties.surname.value;}
userlog.result="success";return userlog;}
function dstvApp(){var self=this;riot.observable(self);}
var dstvApp=new dstvApp();var countryAbbr=site.factory.getCulture()||"en-ng";var cultureCountryAbbr=countryAbbr.split("-")[1];let languageAbbrivation=countryAbbr.split("-")[0];let portugueseLanguageAbbreviation="por";dstvApp.DashboardURL=window.culture+"/dashboard";if(location.hostname.includes('qa'))
dstvApp.GOURL='qa.gotvafrica.com';else if(location.hostname.includes('uat'))
dstvApp.GOURL='uat.gotvafrica.com';else if(location.hostname.includes('dev1'))
dstvApp.GOURL='dev.gotvafrica.com';else if(location.hostname.includes('dev2'))
dstvApp.GOURL='dev.gotvafrica.com';else if(location.hostname.includes('preprod'))
dstvApp.GOURL='preprodgotvafrica.com';else
dstvApp.GOURL='www.gotvafrica.com';dstvApp.GOURL=`https://${dstvApp.GOURL+window.culture}`;dstvApp.MyAccountURL=dstvApp.DashboardURL
dstvApp.UpdateDetailsURL=dstvApp.DashboardURL
dstvApp.ChangePackageURL=dstvApp.DashboardURL
dstvApp.dstvThanksCountries=["/en-ng","/en-gh","/en-zm","/en-ug","/en-ao","/pt-ao","/en-tz","/en-ke","/en-na"];if(site.env=='QA'){}
if(dstvApp.dstvThanksCountries.includes(window.culture)){dstvApp.DstvThanksURL=window.culture.includes('en-')?window.culture+'/dstv-thanks':window.culture+'/dstv-thanks'}else{dstvApp.DstvThanksURL=window.culture.includes('en-')?window.culture+'/rewards/dstv-thanks':window.culture+'/recompensas/dstv-agradece'}
dstvApp.RewardListURL=window.culture+'/reward-list/';dstvApp.tkn='Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiMjQ3MjAyNzc0I25pZ2VyaWEjRFN0diNORyMgI3dlYiNhI05HTiMxMDI5NDgwMzkxIiwic3ViIjoiMjQ3MjAyNzc0I25pZ2VyaWEjRFN0diNORyMgI3dlYiNhI05HTiMxMDI5NDgwMzkxIiwianRpIjoiNzkwOGNjZjUtMGU0OC00OWE2LWE0N2QtMDU0ODJhNDdhYTk5IiwiZXhwIjoxNTY1MzQ2NTI2LCJpc3MiOiJtb2JpbGV3cmFwcGVyIiwiYXVkIjoibW9iaWxld3JhcHBlciJ9.LmqD07JD1zTGQah1mBZauQw_vj9euCU3qmkhhR_7-jFZHslS-68k_4IUM_uQuEKNwcvt-jjAPmAuk4kjHvMXHg';dstvApp.jwtTokenKey='JWTTokenKey';dstvApp.timeToExpire=100;dstvApp.QAThanksAPIBaseUrl='https://qa-api.dstvafrica.com/apidstvthanks/api/v1/';dstvApp.PRODThanksAPIBaseUrl='https://api.dstvafrica.com/apidstvthanks/api/v1/';dstvApp.JwtTokenApiUrl='';dstvApp.ReqBody='';dstvApp.qaJwtTokenApiUrl='https://mahauthorizationapi.azurewebsites.net/api/Values';dstvApp.qaReqBody={"PlatformName":"dstvafrica","GUID":"1e1b7e41-0ed0-4ae4-9f73-a6a8a34c186a"}
dstvApp.prodJwtTokenApiUrl='https://dsoauthorizationapi-prod.azurewebsites.net/api/Values';dstvApp.prodReqBody={"PlatformName":"dstvafrica","GUID":"d1aafa2c-9d7c-48dc-8be8-6105d5db2f8d"}
dstvApp.env=site.factory.GetEnvironment();if(dstvApp.env=='PROD'){dstvApp.JwtTokenApiUrl=dstvApp.prodJwtTokenApiUrl;dstvApp.ReqBody=dstvApp.prodReqBody;dstvApp.ThanksAPIBaseUrl=dstvApp.PRODThanksAPIBaseUrl;}
else{dstvApp.JwtTokenApiUrl=dstvApp.qaJwtTokenApiUrl;dstvApp.ReqBody=dstvApp.qaReqBody;dstvApp.ThanksAPIBaseUrl=dstvApp.QAThanksAPIBaseUrl;}
$.ajax({url:'/scripts/country-config.js',async:false,dataType:'json',success:function(res){if(res){dstvApp.cConfig=res;res=res.filter(c=>c.countryabbreviation.includes(cultureCountryAbbr)&&(c.language.toLowerCase().includes(languageAbbrivation)||c.language.toLowerCase().includes(portugueseLanguageAbbreviation)))[0]
dstvApp.customernumber='';dstvApp.country=res.country;dstvApp.countryCode=res.countryCode;dstvApp.language=res.language;dstvApp.languageAbbreviation=res.languageAbbreviation;dstvApp.ipAddress=res.ipAddress;dstvApp.businessunit=res.businessunit;dstvApp.countrycurrency=res.countrycurrency;dstvApp.countryabbreviation=res.countryabbreviation;dstvApp.flagposition=res.flagposition;dstvApp.countryisocode=res.countryisocode;dstvApp.liveChatSupport=res.liveChatSupport;dstvApp.termsandcondition=res.termsandcondition;dstvApp.InstagramList=['tz'];dstvApp.TvLevyCountryList=['nigeria'];dstvApp.BoxOfficeCountryList=['ng','ke'];dstvApp.channel='dstvafrica';dstvApp.vendorcode='DStvWeb';dstvApp.liveTargetCountries=['zm','ng','ug','gh','ao','ke','tz','na','mz','bw','zw','et','mw','sz'];dstvApp.nonLiveTargetCountries=['mu','cd'];dstvApp.targetcountries=['zm','ng','ug','gh','ao','ke','tz','na','mz','bw','mw','zw','mu','sz','cd','et'];dstvApp.DTHCountries=["bj","bf","bi","cm","cv","td","cg","dj","gq","er","ga","gm","gn","gw","ci","lr","mg","mr","ne","rw","st","sn","sc","sl","sd","tg","ls","so","ml","ss"];dstvApp.MultiLanguageCountryList=['mz','ao'];dstvApp.Dstvthanksfaqscountry=['nigeria'];dstvApp.RewardCountryList=[]
dstvApp.Dstvthankstargetcountry=['zambia','nigeria','ghana'];dstvApp.RecurringPaymentCountries=[];dstvApp.noIframeCountryList=['et'];dstvApp.noDealersCountryList=['et','sz','mu'];dstvApp.noInstallersCountryList=['gh'];dstvApp.NoRewardCountryList=['mz','ug'];dstvApp.NoShowmaxCountryList=['ao','mz'];dstvApp.NoBoxOfficeCountryList=['cd','sz'];dstvApp.NoOnlinePaymentCountryList=['ao','bw','sz','mu'];dstvApp.AddonPackages=["FRN15E36","ASIAE36","FRN7E36","FRN15E36","PRWE36","PORTKU","ASIADS20"];if(dstvApp.countryabbreviation!='zm'){dstvApp.AddonPackages.push("ASIA3KU");dstvApp.AddonPackages.push("GWALLE36");}
dstvApp.DualCurrenciesList=['et-etb','mu-mur'];dstvApp.DualCurrencyCountryList=['et','mu'];dstvApp.DualCurrencyPaymentCurrency=[{'country':'et','currency':'usd'}];dstvApp.url="https://live.mcadigitalmedia.com/VendorSelfCareWebApi/api/";dstvApp.APIUrl="https://live.mcadigitalmedia.com/VendorSelfCareWebApi/api/";dstvApp.ProxyAPIUrl="https://qa-api.dstvafrica.com/GetSmartQuoteByBasketID/api/";if(site.env=='PROD'){dstvApp.SelfServiceEnabledCountries=['mu','cd'];dstvApp.DSOAPIUrl="https://api.dstvafrica.com/";dstvApp.DSOAuthUrl='https://dsoauthorizationapi-prod.azurewebsites.net/api/Values';dstvApp.DSOAuthGUID='d1aafa2c-9d7c-48dc-8be8-6105d5db2f8d';dstvApp.PaymentURL=`https://onlinepayments.dstvafrica.com/${dstvApp.countryisocode}/${dstvApp.languageAbbreviation}/payment/`;dstvApp.PaymentBaseUrl='https://onlinepayments.dstvafrica.com/';dstvApp.ShowMaxAPIURL='https://p4zk7bfh3b.execute-api.eu-west-1.amazonaws.com/prod/GetActivationLink';dstvApp.EazyMobileAPIURL='https://eazy-mobile-api.azurewebsites.net/api/';dstvApp.DSOChangePackageURL='https://api.dstvafrica.com/apichangepackage/api/v1/ChangePackage';dstvApp.DSOUpgradePackageURL='https://api.dstvafrica.com/apichangepackage/api/v1/ChangePackage/Upgrade';dstvApp.DSODowngradePackageURL='https://api.dstvafrica.com/apichangepackage/api/v1/ChangePackage/Downgrade';dstvApp.DSOLinkAddOnsURL='https://api.dstvafrica.com/apichangepackage/api/v1/ChangePackage/LinkAddOn';dstvApp.DSORetryQuotesURL='https://api.dstvafrica.com/apichangepackage/api/v1/ChangePackage/RetryQuotes';dstvApp.DSOPaymentServiceURL=location.host.includes('preprod')?'https://dso-paymentservice-test.azurewebsites.net/api/v1/Payment':'https://api.dstvafrica.com/apipaymentservice/api/v1/Payment';dstvApp.BoxOfficeSignUpURL=`https://connect.dstv.com/registration/signup/en-${dstvApp.countryabbreviation}?ReturnUrl=http://boxoffice.dstv.com/`;dstvApp.InstallerBaseURL=`${dstvApp.DSOAPIUrl}apifindinstaller/api/FindInstaller`;dstvApp.DealersURL=`${dstvApp.InstallerBaseURL}/GetDealer?country=${dstvApp.country}&BusinessUnit=${dstvApp.businessunit}&Channel=dstvafrica&limit=1000`;dstvApp.InstallersURL=`${dstvApp.InstallerBaseURL}/GetInstaller?country=${dstvApp.country}&BusinessUnit=${dstvApp.businessunit}&Channel=${dstvApp.channel}`;dstvApp.InstallerCitiesURL=`${dstvApp.InstallerBaseURL}/GetInstallerCityByCountry?country=${dstvApp.country}&businessUnit=${dstvApp.businessunit}`;}
else{dstvApp.SelfServiceEnabledCountries=dstvApp.nonLiveTargetCountries;dstvApp.DSOAPIUrl="https://qa-api.dstvafrica.com/";dstvApp.DSOAuthUrl='https://mahauthorizationapi.azurewebsites.net/api/Values';dstvApp.DSOAuthGUID='1e1b7e41-0ed0-4ae4-9f73-a6a8a34c186a';dstvApp.PaymentURL=`https://malpaymentsqa.azurewebsites.net/${dstvApp.countryisocode}/${dstvApp.languageAbbreviation}/payment/`;dstvApp.PaymentBaseUrl='https://malpaymentsqa.azurewebsites.net/';dstvApp.ShowMaxAPIURL='https://9tchltj3b2.execute-api.eu-west-1.amazonaws.com/uat/GetActivationLink';dstvApp.EazyMobileAPIURL='https://eazy-mobile-api-uat.azurewebsites.net/api/';dstvApp.DSOChangePackageURL='https://qa-api.dstvafrica.com/apichangepackage/api/v1/ChangePackage';dstvApp.DSOUpgradePackageURL='https://qa-api.dstvafrica.com/apichangepackage/api/v1/ChangePackage/Upgrade';dstvApp.DSODowngradePackageURL='https://qa-api.dstvafrica.com/apichangepackage/api/v1/ChangePackage/Downgrade';dstvApp.DSOLinkAddOnsURL='https://qa-api.dstvafrica.com/apichangepackage/api/v1/ChangePackage/LinkAddOn';dstvApp.DSORetryQuotesURL='https://qa-api.dstvafrica.com/apichangepackage/api/v1/ChangePackage/RetryQuotes';dstvApp.DSOPaymentServiceURL=location.host.includes('preprod')?'https://qa-api.dstvafrica.com/apipaymentservice-dpp/api/v1/Payment':'https://qa-api.dstvafrica.com/apipaymentservice/api/v1/Payment';dstvApp.BoxOfficeSignUpURL=`https://stagingapps.dstv.com/connect/registration/signup/en-${dstvApp.countryabbreviation}?redirect_uri=http://staging-boxoffice.dstv.com/`;dstvApp.InstallerBaseURL=`${dstvApp.DSOAPIUrl}apifindinstaller/api/FindInstaller`;dstvApp.DealersURL=`${dstvApp.InstallerBaseURL}/GetDealer?country=${dstvApp.country}&BusinessUnit=${dstvApp.businessunit}&Channel=dstvafrica&limit=1000`;dstvApp.InstallersURL=`${dstvApp.InstallerBaseURL}/GetInstaller?country=${dstvApp.country}&BusinessUnit=${dstvApp.businessunit}&Channel=${dstvApp.channel}`;dstvApp.InstallerCitiesURL=`${dstvApp.InstallerBaseURL}/GetInstallerCityByCountry?country=${dstvApp.country}&businessUnit=${dstvApp.businessunit}`;}
dstvApp.DSOPayments='on';dstvApp.DualCurrency='on';dstvApp.BouquetTermination=true;dstvApp.showOfflineMsg=false;}
else{alert('something went wrong while country initialization !! please contact your service provider.')}},error:function(e){console.log('Unable to read country config js')}});dstvApp.setUserLog=function(){var dstvUserlog={};dstvUserlog.customernumber=dstvApp.customernumber;if(dstvApp[dstvApp.customernumber]&&dstvApp[vscApp.customernumber].properties){dstvUserlog.emailid=dstvApp[dstvApp.customernumber].properties.email.value;dstvUserlog.customertype=dstvApp[dstvApp.customernumber].properties.customerType.value;dstvUserlog.customername=dstvApp[dstvApp.customernumber].properties.firstName.value+" "+dstvApp[dstvApp.customernumber].properties.surname.value;}
dstvUserlog.result="success";return dstvUserlog;}
function langTranslateApp(){var self=this;riot.observable(self);}
var langTranslateApp=new langTranslateApp();$.ajax({url:'/scripts/languageConfig.js',async:false,dataType:'json',success:function(res){if(res){if(dstvApp.language=="English"){langTranslateApp=res[0].en;}else{langTranslateApp=res[0].pt;}}
else{alert('something went wrong while country initialization !! please contact your service provider.')}},error:function(e){console.log('Unable to read language config js')}});var tempcdv=window.SessionLoad("windowcdv");if(false&&tempcdv!==window.cdv){window.SessionRemove("app");window.SessionRemove("app.decoders");window.SessionRemove("app.linkdecoder");window.SessionRemove("app.holidayviewing");window.SessionRemove("app.alldecodersloaded");window.SessionRemove("app.contactdetails");window.SessionRemove("app.duepaymentaccounts");window.SessionRemove("app.holidayaccountnumbers");window.SessionRemove("app.holidaydecodersdata");window.SessionRemove("app.boxofficeaccountnumbers");window.SessionRemove("app.residentialaccountnumbers");window.SessionRemove("app.customernumber");window.SessionRemove("app."+app.customernumber);window.SessionRemove("app.showmaxData");window.SessionRemove("app.loadedpackages");window.SessionSave("windowcdv",window.cdv);}
else{var temp=window.SessionLoad("app");if(temp!=null){for(var k in temp){var t=temp[k];if((t!=="loading")&&(t!==undefined)){app[k]=t;}}}}
riot.mount("tag-initialise",app);app.trigger("all-tags-mounted");app.trigger("window-resize",$(document).width());if(paymentSuccess!==""&&paymentSuccess==="fail"){history.pushState(null,null,"/#make-payment/fail");app.paymentresult="fail";}
else if(paymentSuccess!==""&&paymentSuccess==="success"){history.pushState(null,null,"/#make-payment/success");app.paymentresult="success";}
if(myaccount!==""&&myaccount==="true"){history.pushState(null,null,"/#my-account");}